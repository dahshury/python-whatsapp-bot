/**
 * UNIVERSAL FULLCALENDAR STYLES
 * ==============================
 *
 * Responsibility: Cross-view styling that applies to ALL calendar views
 * - Universal event colors and styling (reservation types, conversation events)
 * - Universal date states (today, past, disabled)
 * - Universal hover effects management
 * - Universal event styling overrides
 * - Universal past event styling
 *
 * Dependencies: CSS variables from _variables.css and theme files
 * Used by: All calendar views as base styling layer
 *
 * Note: View-specific overrides should go in their respective view files
 * Note: Feature-specific styles should go in features/ directory
 */

/* =================================
   UNIVERSAL EVENT COLORS & STYLES
   ================================= */

/* Base event styling for all views */
.fc-event {
	border-radius: var(--radius);
	font-weight: 500;
}

/* Typed event variables mapping (centralized) */
.reservation-type-0 {
	--fc-typed-bg: var(--fc-reservation-type-0-bg);
	--fc-typed-grad-end: var(--fc-reservation-type-0-bg-grad-end);
	--fc-typed-border: var(--fc-reservation-type-0-border);
	--fc-typed-text: var(--fc-reservation-type-0-text);
}
.reservation-type-1 {
	--fc-typed-bg: var(--fc-reservation-type-1-bg);
	--fc-typed-grad-end: var(--fc-reservation-type-1-bg-grad-end);
	--fc-typed-border: var(--fc-reservation-type-1-border);
	--fc-typed-text: var(--fc-reservation-type-1-text);
}

/* Remove special-case inline background-color override in favor of unified typed rule */
/* .fc-event[style*="background-color"]:is(.reservation-type-0, .reservation-type-1):not(.fc-list-event) { */
/* 	background-color: var(--fc-typed-bg) !important; */
/* 	background-image: none !important; */
/* 	border-color: var(--fc-typed-bg) !important; */
/* 	border-radius: var(--radius) !important; */
/* } */

/* Conversation inline override stays */
.fc-event[style*="background-color"].conversation-event:not(.fc-list-event) {
	background: var(--fc-conversation-bg);
	border-color: var(--fc-conversation-bg);
}

/* Typed events - base style (centralized) */
.fc-event:is(.reservation-type-0, .reservation-type-1):not(.fc-list-event) {
	background-color: var(--fc-typed-bg);
	background-image: none;
	border-color: var(--fc-typed-border);
	color: var(--fc-typed-text);
	border-radius: var(--radius);
}

/* Typed events - hover style (centralized) */
.fc-event:is(.reservation-type-0, .reservation-type-1):not(
		.fc-list-event
	):hover,
.fc-daygrid-event:is(.reservation-type-0, .reservation-type-1):not(
		.fc-list-event
	):hover,
.fc-timegrid-event:is(.reservation-type-0, .reservation-type-1):not(
		.fc-list-event
	):hover {
	background-image: linear-gradient(
		135deg,
		var(--fc-typed-bg) 0%,
		var(--fc-typed-grad-end) 100%
	);
	filter: saturate(1.05) brightness(1.02);
	border-color: var(--fc-typed-border);
	color: var(--fc-typed-text);
	border-radius: var(--radius);
}

/* Typed events - wrappers (centralized) */
.fc-h-event:is(.reservation-type-0, .reservation-type-1):not(.fc-list-event),
.fc-v-event:is(.reservation-type-0, .reservation-type-1):not(.fc-list-event),
.fc-daygrid-block-event:is(.reservation-type-0, .reservation-type-1):not(
		.fc-list-event
	) {
	background-color: var(--fc-typed-bg);
	background-image: none;
	border-color: var(--fc-typed-border);
	color: var(--fc-typed-text);
	border-radius: var(--radius);
}

/* (Replaced by centralized hover above) */

/* Conversation events (Orange) */
.fc-event.conversation-event:not(.fc-list-event) {
	background: var(--fc-conversation-bg);
	border-color: var(--fc-conversation-bg);
	color: hsl(var(--background));
}

.dark .fc-event.conversation-event:not(.fc-list-event) {
	color: hsl(var(--foreground));
}

/* Conversation event title styling */
.fc-event.conversation-event .fc-event-title {
	font-weight: 600;
	line-height: 1.3;
	display: flex;
	align-items: center;
	gap: 4px;
	color: var(--fc-event-text-color);
	text-shadow: none;
	outline: none;
	border: none;
}

/* Cancelled events - universal styling */
.fc-event[data-cancelled="true"] .fc-event-title {
	text-decoration: line-through;
}

.fc-event[data-cancelled="true"]:not(.fc-list-event) {
	filter: brightness(0.7) saturate(0.8);
	opacity: 0.9;
}

/* UNIVERSAL EVENT HOVER EFFECTS - KEEP APPEARANCE, NO TRANSFORMS */
.fc-event:hover,
.fc-daygrid-event:hover,
.fc-timegrid-event:hover,
.fc-list-event:hover {
	transform: none;
	box-shadow: none;
	cursor: pointer;
}

/* =================================
   UNIVERSAL DATE STATES & COLORS
   ================================= */

/* TODAY - Universal styling */
.fc-day-today,
.fc-timegrid-col.fc-day-today {
	background: hsl(var(--primary) / 0.03);
	position: relative;
}

.dark .fc-day-today {
	background: hsl(var(--primary) / 0.08);
}

/* PAST DATES - Universal styling */
.fc-day-past:not(.fc-day-other) {
	background-color: hsl(var(--muted) / 0.4);
	opacity: 0.7;
}

.dark .fc-day-past:not(.fc-day-other) {
	background-color: hsl(var(--muted) / 0.6);
	opacity: 0.5;
}

/* DISABLED DATES - Universal styling */
.fc-day-disabled:not(.fc-day-other) {
	background: repeating-linear-gradient(
		135deg,
		transparent,
		transparent 12px,
		hsl(var(--muted) / 0.4) 12px,
		hsl(var(--muted) / 0.4) 14px
	);
	background-color: hsl(var(--muted) / 0.1);
}

.dark .fc-day-disabled:not(.fc-day-other) {
	background: repeating-linear-gradient(
		135deg,
		transparent,
		transparent 12px,
		hsl(var(--muted) / 0.4) 12px,
		hsl(var(--muted) / 0.4) 14px
	);
	background-color: hsl(var(--muted) / 0.2);
}

/* =================================
   UNIVERSAL DATE HOVER EFFECTS
   ================================= */

/* Date hover for eligible days only */
.fc-day:not(.fc-day-past):not(.fc-day-disabled):hover {
	background-color: hsl(var(--accent) / 0.15);
	box-shadow: inset 0 0 0 1px hsl(var(--accent) / 0.4);
	cursor: pointer;
	transition: all 0.2s ease;
}

.dark .fc-day:not(.fc-day-past):not(.fc-day-disabled):hover {
	background-color: hsl(var(--accent) / 0.25);
	box-shadow: inset 0 0 0 1px hsl(var(--accent) / 0.5);
}

/* Selected date highlighting */
.fc-day.selected-date-cell,
.selected-date-cell {
	background-color: hsl(var(--accent));
	color: hsl(var(--accent-foreground));
}

/* Highlight/selection overlay */
.fc-highlight {
	background: hsl(var(--primary) / 0.2);
	opacity: 1;
	pointer-events: none;
}

/* =================================
   FREE ROAM MODE OVERRIDES
   ================================= */

/* Remove custom coloring for past/disabled days in free roam */
[data-free-roam="true"] .fc-day-disabled,
[data-free-roam="true"] .fc-day-past {
	background-color: transparent;
	opacity: 1;
}

/* Allow past events to be clickable in free roam mode */
[data-free-roam="true"] .fc-day-past .fc-event {
	pointer-events: auto;
	cursor: pointer;
}

/* Past events - reduce opacity across all views */
.fc-event.fc-event-past:not(.fc-list-event):not(:hover) {
	opacity: var(--fc-event-past-opacity);
	color: inherit;
}

/* Dark mode past events - slightly lower opacity */
.dark .fc-event.fc-event-past:not(.fc-list-event) {
	opacity: calc(var(--fc-event-past-opacity) - 0.1);
}
